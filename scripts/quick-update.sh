#!/bin/bash
# ğŸš€ NANUKç½‘ç«™å¿«é€Ÿæ›´æ–°è„šæœ¬

echo "ğŸ”„ å¼€å§‹ç½‘ç«™æ›´æ–°æµç¨‹..."

# æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹
if [[ -n $(git status -s) ]]; then
    echo "ğŸ“ å‘ç°æœªæäº¤çš„æ›´æ”¹"
    
    # æ˜¾ç¤ºæ›´æ”¹çš„æ–‡ä»¶
    echo "ğŸ“‹ æ›´æ”¹çš„æ–‡ä»¶ï¼š"
    git status --short
    
    # æ·»åŠ æ‰€æœ‰æ›´æ”¹
    git add .
    
    # è·å–æäº¤ä¿¡æ¯
    echo "ğŸ’¬ è¯·è¾“å…¥æ›´æ–°è¯´æ˜ï¼š"
    read -r commit_message
    
    # å¦‚æœæ²¡æœ‰è¾“å…¥ï¼Œä½¿ç”¨é»˜è®¤ä¿¡æ¯
    if [[ -z "$commit_message" ]]; then
        commit_message="update: ç½‘ç«™å†…å®¹æ›´æ–° $(date +'%Y-%m-%d %H:%M')"
    fi
    
    # æäº¤æ›´æ”¹
    git commit -m "$commit_message"
    
    # æ¨é€åˆ°è¿œç¨‹ä»“åº“
    echo "ğŸš€ æ¨é€æ›´æ–°åˆ°GitHub..."
    git push origin main
    
    if [[ $? -eq 0 ]]; then
        echo "âœ… æ›´æ–°æˆåŠŸï¼"
        echo "ğŸŒ ç½‘ç«™å°†åœ¨2-3åˆ†é’Ÿå†…è‡ªåŠ¨æ›´æ–°"
        echo "ğŸ“± å¯ä»¥è®¿é—® https://qian-ten.vercel.app/ æŸ¥çœ‹æ•ˆæœ"
        echo "â° å»ºè®®ç­‰å¾…å‡ åˆ†é’Ÿååˆ·æ–°é¡µé¢"
    else
        echo "âŒ æ¨é€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æƒé™"
    fi
else
    echo "â„¹ï¸  æ²¡æœ‰å‘ç°éœ€è¦æ›´æ–°çš„å†…å®¹"
fi

echo "ğŸ‰ æ›´æ–°æµç¨‹å®Œæˆï¼"